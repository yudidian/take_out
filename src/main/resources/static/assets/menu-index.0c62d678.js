import{g as y,d as P,f as S}from"./setMeal.28d89694.js";import{q as B,r as _,v as E,E as c,f as r,x as T,o as h,c as V,g as t,z as q,m as F,w as l,h as G,F as I,j as p,t as f,a as R}from"./index.324fbc67.js";const W=p(" \u7F16\u8F91 "),j=p(" \u5220\u9664 "),J={setup(K){const k=B(),d=_([]),w=_(""),n=_({total:0,pages:[]});E(()=>{u()});const M=async e=>{switch(e){case 1:{await v(d.value);break}case 2:{await m(d.value,0);break}case 3:{await m(d.value,1);break}}},C=e=>{d.value=e.map(s=>s.id)},u=async()=>{const e=await y({page:1,pageSize:10,name:w.value});e.code===1?(n.value.total=e.info.total,n.value.pages=e.info.records):c.error({message:e.msg})},x=e=>{k.push(`/menu/add?id=${e}`)},v=async e=>{const s=await P({ids:e});s.code===1?c.success({message:s.msg}):c.error({message:s.msg}),await u()},m=async(e,s)=>{const i=await S({ids:e,status:s===0?1:0});i.code===1?c.success({message:i.msg}):c.error({message:i.msg}),await u()},H=async e=>{w.value=e,await u()};return(e,s)=>{const i=r("MyHeader"),o=r("el-table-column"),$=r("el-avatar"),g=r("el-button"),z=r("el-table"),D=r("MyPagination"),N=T("loading");return h(),V(I,null,[t(i,{onShowDialog:s[0]||(s[0]=a=>e.$router.push("/menu/add")),onGetKeyWords:H,onListHandler:M}),q((h(),F(z,{ref:"multipleTableRef",data:n.value.pages,style:{width:"100%"},onSelect:C},{default:l(()=>[t(o,{type:"selection",width:"40"}),t(o,{label:"\u5957\u9910\u540D\u79F0",width:"120",prop:"name"}),t(o,{label:"\u56FE\u7247",width:"140"},{default:l(a=>[t($,{shape:"square",size:100,fit:"fill",src:`http://localhost:8080/download?fileName=${a.row.image}`},null,8,["src"])]),_:1}),t(o,{label:"\u83DC\u54C1\u5206\u7C7B",prop:"categoryName"}),t(o,{label:"\u552E\u4EF7",prop:"price"},{default:l(a=>[p(" \uFFE5 "+f(a.row.price/100),1)]),_:1}),t(o,{label:"\u9500\u552E\u72B6\u6001",prop:"status"},{default:l(a=>[R("span",null,f(a.row.status===1?"\u9500\u552E\u4E2D":"\u505C\u552E"),1)]),_:1}),t(o,{label:"\u6700\u540E\u64CD\u4F5C\u65F6\u95F4",property:"updateTime"}),t(o,{label:"\u64CD\u4F5C"},{default:l(a=>[t(g,{text:"",size:"small",type:"primary",onClick:b=>x(a.row.id)},{default:l(()=>[W]),_:2},1032,["onClick"]),t(g,{text:"",size:"small",type:"warning",onClick:b=>v([a.row.id])},{default:l(()=>[j]),_:2},1032,["onClick"]),t(g,{text:"",size:"small",type:"danger",onClick:b=>m([a.row.id],a.row.status)},{default:l(()=>[p(f(a.row.status===1?"\u7981\u7528":"\u542F\u7528"),1)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,n.value.pages.length<=0]]),t(D,{"get-info":G(y),total:n.value.total,onGetPageMessage:s[1]||(s[1]=a=>n.value.pages=a)},null,8,["get-info","total"])],64)}}};export{J as default};
